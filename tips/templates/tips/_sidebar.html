<!-- tips/templates/tips/_sidebar.html -->

<!-- Tips Sidebar - Advanced Filters -->
<aside class="w-80 flex-shrink-0 sticky top-20 h-fit hidden lg:block">

  <!-- Search Card -->
  <div class="bg-gray-50 dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 p-4 mb-4">
    <form method="get" action="{% url 'tips:tip_list' %}">
      <div class="relative mb-3">
        <input type="text" name="search" value="{{ search_query|default:'' }}" placeholder="Search tips..."
          class="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white text-sm">
        <svg class="w-5 h-5 absolute left-3 top-2.5 text-gray-400" fill="none" stroke="currentColor"
          viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
      </div>

      <!-- Date Range Filter -->
      <div class="mb-3">
        <label class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2 block">DATE RANGE</label>
        <select name="date_range"
          class="w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg text-sm dark:bg-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-emerald-500">
          <option value="">All Time</option>
          <option value="last_7_days" {% if date_range == 'last_7_days' %}selected{% endif %}>Last 7 Days</option>
          <option value="last_month" {% if date_range == 'last_month' %}selected{% endif %}>Last Month</option>
        </select>
      </div>

      <!-- Sort By -->
      <div class="mb-3">
        <label class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2 block">SORT BY</label>
        <select name="sort_by"
          class="w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg text-sm dark:bg-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-emerald-500">
          <option value="newest" {% if sort_by == 'newest' or not sort_by %}selected{% endif %}>Newest First</option>
          <option value="oldest" {% if sort_by == 'oldest' %}selected{% endif %}>Oldest First</option>
          <option value="most_liked" {% if sort_by == 'most_liked' %}selected{% endif %}>Most Liked</option>
          <option value="most_commented" {% if sort_by == 'most_commented' %}selected{% endif %}>Most Commented</option>
        </select>
      </div>

      <button type="submit"
        class="w-full px-4 py-2 bg-emerald-500 text-white text-sm font-medium rounded-lg hover:bg-emerald-600 transition-colors">
        Apply Filters
      </button>

      {% if search_query or date_range or sort_by or selected_category %}
      <a href="{% url 'tips:tip_list' %}"
        class="block text-center mt-2 text-sm text-gray-600 dark:text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400">
        Clear all filters
      </a>
      {% endif %}
    </form>
  </div>

  <!-- Categories Card -->
  <div class="bg-gray-50 dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 p-4 mb-4">
    <h3 class="font-semibold text-gray-900 dark:text-white mb-3 text-sm">Categories</h3>
    <div class="space-y-1">
      <a href="{% url 'tips:tip_list' %}"
        class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-sm {% if not selected_category %}bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 font-medium{% else %}text-gray-700 dark:text-gray-300{% endif %}">
        <span>üåç</span>
        <span>All Tips</span>
      </a>
      {% for category in categories %}
      <a href="{% url 'tips:category_detail' slug=category.slug %}"
        class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-sm {% if selected_category == category.slug %}bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 font-medium{% else %}text-gray-700 dark:text-gray-300{% endif %}">
        <span>{{ category.icon }}</span>
        <span>{{ category.name }}</span>
      </a>
      {% endfor %}
    </div>
  </div>

  {% if user.is_authenticated %}
  <!-- Quick Actions Card -->
  <div class="bg-gray-50 dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 p-4 mb-4">
    <h3 class="font-semibold text-gray-900 dark:text-white mb-3 text-sm">Quick Actions</h3>
    <div class="space-y-2">
      <a href="{% url 'tips:create_tip' %}"
        class="flex items-center gap-2 px-3 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors text-sm font-medium">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
        </svg>
        Create Tip
      </a>
      <a href="{% url 'tips:my_tips' %}"
        class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-sm text-gray-700 dark:text-gray-300">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
          </path>
        </svg>
        My Tips
      </a>

      <a href="{% url 'tips:saved_tips' %}"
        class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-sm text-gray-700 dark:text-gray-300">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
        </svg>
        Saved Tips
      </a>

    </div>
  </div>
  {% endif %}

  <!-- Stats Card -->
  <div class="bg-gray-50 dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 p-4">
    <h3 class="font-semibold text-gray-900 dark:text-white mb-3 text-sm">Community Stats</h3>
    <div class="space-y-3 text-sm">
      <div class="flex items-center justify-between">
        <span class="text-gray-600 dark:text-gray-400">Total Tips</span>
        <span class="font-semibold text-gray-900 dark:text-white">{{ total_tips|default:"0" }}</span>
      </div>
      <div class="flex items-center justify-between">
        <span class="text-gray-600 dark:text-gray-400">Categories</span>
        <span class="font-semibold text-gray-900 dark:text-white">{{ categories.count }}</span>
      </div>
      <div class="flex items-center justify-between">
        <span class="text-gray-600 dark:text-gray-400">Total Likes</span>
        <span class="font-semibold text-gray-900 dark:text-white">{{ total_likes|default:"0" }}</span>
      </div>
    </div>
  </div>
</aside>