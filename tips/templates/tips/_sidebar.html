<!-- tips/templates/tips/_sidebar.html -->

<!-- Tips Sidebar - Advanced Filters -->
<!-- Mobile Overlay -->
<div id="tipsSidebarOverlay" onclick="toggleTipsSidebar()"
  class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden backdrop-blur-sm transition-opacity"></div>

<aside id="tipsSidebar"
  class="fixed inset-y-0 left-0 z-50 w-80 bg-white dark:bg-gray-950 transform -translate-x-full transition-transform duration-300 lg:translate-x-0 lg:static lg:block lg:h-fit lg:sticky lg:top-20 shadow-2xl lg:shadow-none overflow-y-auto lg:overflow-visible">

  <!-- Mobile Header -->
  <div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-800 lg:hidden">
    <h2 class="font-bold text-gray-900 dark:text-white">Filters</h2>
    <button onclick="toggleTipsSidebar()" class="p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>
  </div>

  <div class="p-4 lg:p-0">

    <!-- Search Card -->
    <div class="bg-gray-50 dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 p-4 mb-4">
      <form method="get" action="{% url 'tips:tip_list' %}">
        <div class="relative mb-3">
          <input type="text" name="search" value="{{ search_query|default:'' }}" placeholder="Search tips..."
            class="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:bg-gray-800 dark:text-white text-sm">
          <svg class="w-5 h-5 absolute left-3 top-2.5 text-gray-400" fill="none" stroke="currentColor"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        </div>

        <!-- Date Range Filter -->
        <div class="mb-3">
          <label class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2 block">DATE RANGE</label>
          <select name="date_range"
            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg text-sm dark:bg-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-emerald-500">
            <option value="">All Time</option>
            <option value="last_7_days" {% if date_range == 'last_7_days' %}selected{% endif %}>Last 7 Days</option>
            <option value="last_month" {% if date_range == 'last_month' %}selected{% endif %}>Last Month</option>
          </select>
        </div>

        <!-- Sort By -->
        <div class="mb-3">
          <label class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2 block">SORT BY</label>
          <select name="sort_by"
            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg text-sm dark:bg-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-emerald-500">
            <option value="newest" {% if sort_by == 'newest' or not sort_by %}selected{% endif %}>Newest First</option>
            <option value="oldest" {% if sort_by == 'oldest' %}selected{% endif %}>Oldest First</option>
            <option value="most_liked" {% if sort_by == 'most_liked' %}selected{% endif %}>Most Liked</option>
            <option value="most_commented" {% if sort_by == 'most_commented' %}selected{% endif %}>Most Commented</option>
          </select>
        </div>

        <button type="submit"
          class="w-full px-4 py-2 bg-emerald-500 text-white text-sm font-medium rounded-lg hover:bg-emerald-600 transition-colors">
          Apply Filters
        </button>

        {% if search_query or date_range or sort_by or selected_category %}
        <a href="{% url 'tips:tip_list' %}"
          class="block text-center mt-2 text-sm text-gray-600 dark:text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400">
          Clear all filters
        </a>
        {% endif %}
      </form>
    </div>

    <!-- Categories Card -->
    <div class="bg-gray-50 dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 p-4 mb-4">
      <h3 class="font-semibold text-gray-900 dark:text-white mb-3 text-sm">Categories</h3>
      <div class="space-y-1">
        <a href="{% url 'tips:tip_list' %}"
          class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-sm {% if not selected_category %}bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 font-medium{% else %}text-gray-700 dark:text-gray-300{% endif %}">
          <span>üåç</span>
          <span>All Tips</span>
        </a>
        {% for category in categories %}
        <a href="{% url 'tips:category_detail' slug=category.slug %}"
          class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-sm {% if selected_category == category.slug %}bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 font-medium{% else %}text-gray-700 dark:text-gray-300{% endif %}">
          <span>{{ category.icon }}</span>
          <span>{{ category.name }}</span>
        </a>
        {% endfor %}
      </div>
    </div>

  </div>
</aside>